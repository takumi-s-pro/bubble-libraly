<!-- app/views/novels/index.html.erb -->
<div class="novels-container">
  <header class="site-header">
    <h1 class="logo">泡沫文庫 <span>Bubble Library</span></h1>
    <% if user_signed_in? %>
      <div class="user-menu">
        <span><%= current_user.nickname %> さん</span>
        <%= link_to '新規投稿', new_novel_path, class: 'btn' %>
        <%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: 'btn' %>
      </div>
    <% else %>
      <div class="auth-links">
        <%= link_to 'ログイン', new_user_session_path, class: 'btn' %>
        <%= link_to '新規登録', new_user_registration_path, class: 'btn' %>
      </div>
    <% end %>
  </header>

  <main>
    <h2 class="section-title">最新の小説</h2>
    <div class="novel-list">
      <% @novels.each do |novel| %>
        <article class="novel-card">
          <h3><%= link_to novel.title, novel_path(novel) %></h3>
          <p class="excerpt"><%= truncate(novel.content, length: 100) %></p>
          <p class="meta">投稿者: <%= novel.user.nickname %> | 公開期限: <%= l(novel.expires_at, format: :short) %></p>
        </article>
      <% end %>
    </div>
  </main>
</div>